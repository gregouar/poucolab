# MVP Plan for Collaborative Scientific Data Platform

WARNING: Generated by AI

## Core MVP Goal
Build a secure, modular, collaborative scientific data management platform where users can:
- Create personal or team-based projects
- Invite/manage team members with access control
- Collect/edit structured measurement data concurrently
- Import/export data via CSV/RDS
- Use templated project schemas
- Upload media linked to data entries

Focus is on correctness, traceability, and modular design for later features like media rendering and paid plans.

---

## Phase 1: Project and Team Access Management

### Backend
- [ ] Design and implement `users` table schema
- [ ] Design and implement `teams` and `team_members` table schemas
- [ ] Design and implement `projects` and `project_memberships` table schemas
- [ ] Implement JWT-based authentication (register, login, logout)
- [ ] Add role-based middleware (project and team scoped)

### API
- [ ] Create endpoints: `/auth/register`, `/auth/login`, `/teams`, `/teams/:id/invite`, `/projects`, `/projects/:id/invite`, `/projects`

### Frontend
- [ ] Build login/register/logout forms and handle authentication state
- [ ] Implement project dashboard UI (create/view projects)
- [ ] Implement team management interface (create team, manage members)
- [ ] Implement per-project member management UI (invite, role management)

---

## Phase 2: Concurrent Data Editing

### Backend
- [ ] Define and implement `templates` table for dynamic schema
- [ ] Define and implement `records` table with `data_json`, `version`, `updated_by`
- [ ] Add optimistic locking strategy for concurrent editing
- [ ] (Optional) Create audit log table and tracking middleware

### API
- [ ] Implement endpoints for CRUD on project records
- [ ] Integrate version control and conflict detection in update logic

### Frontend
- [ ] Implement editable grid or table UI for viewing records
- [ ] Implement add/edit/delete form UI (dynamic fields from template)
- [ ] Implement version conflict detection and UI warning logic
- [ ] Add polling or stub notification system for data refresh

---

## Phase 3: Import / Export

### Backend
- [ ] Implement CSV parser with template mapping logic
- [ ] Implement CSV/R-compatible export based on template schema

### API
- [ ] Add endpoints: `/projects/:id/import`, `/projects/:id/export.csv`, `/projects/:id/export.rds`

### Frontend
- [ ] Implement file upload form and field mapping interface for import
- [ ] Add export UI with format selection dropdown

---

## Phase 4: Media Upload

### Backend
- [ ] Define `media_files` table schema (record_id FK, UUID filename, metadata)
- [ ] Implement local file upload service (S3 wrapper abstraction for future use)
- [ ] Implement optional signed URL flow

### API
- [ ] Add `/media/upload` and `/media/:id/download` endpoints

### Frontend
- [ ] Add media upload UI component for records
- [ ] Add UI component to list and link existing media files

---

## Phase 5: Plans and Billing Logic

### Backend
- [ ] Create `plans` table and define feature limitations per plan
- [ ] Add `plan_id` to `users` and `teams`
- [ ] Implement feature gating middleware (project limit, team size, storage quota)

### Frontend
- [ ] Implement settings UI to show current plan and usage
- [ ] Add upgrade prompt (mock billing modal)

---

## Technical Notes
- Schema: normalize and use FK constraints, cascade delete where appropriate
- Use traits to abstract media storage for local vs cloud
- Shared types and validation logic in `shared-types` crate
- JWT middleware enforces auth and access control
- Plan for offline sync with SQLite mirror and local queueing

---

## Success Criteria for MVP
- [ ] Secure authentication and session management
- [ ] Per-project/team access control with role-based permissions
- [ ] Collaborative record editing with conflict handling
- [ ] Structured import/export functionality
- [ ] Per-record media file support
- [ ] Basic plan enforcement (project count, team size)

---

## Optional Post-MVP
- Real-time collaboration with WebSocket sync
- Offline-first mode using SQLite
- In-browser 3D model preview and measurement annotation
- Public sharing and data DOI registration

---

